<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flavio e Marcella em Ilhabela</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>

    <div id="toast-container"></div>

    <div class="container" id="export-container">
        
        <div class="global-controls">
            <div class="control-group">
                <button class="btn-save" id="save-progress" title="Salvar"><i class="fas fa-save"></i></button>
                <button class="btn-load" id="load-progress" title="Carregar"><i class="fas fa-upload"></i></button>
                <button class="btn-clear" id="clear-progress" title="Limpar"><i class="fas fa-trash"></i></button>
                <button id="install-app-btn" title="Instalar App" style="display: none; background-color: var(--primary-color); color: white;"><i class="fas fa-download"></i></button>
            </div>
            <button class="theme-toggle" id="theme-toggle" aria-label="Alternar tema"><i class="fas fa-moon"></i></button>
        </div>

        <h1>Flavio e Marcella em Ilhabela</h1>

        <details open>
            <summary><i class="fa-solid fa-hourglass-half"></i>Contagem Regressiva</summary>
            <div class="details-content">
                <div id="countdown-container">
                    <h3 class="countdown-title">A nossa viagem começa em...</h3>
                    <div id="countdown-timer">
                        <div><span id="days">00</span><span>Dias</span></div>
                        <div><span id="hours">00</span><span>Horas</span></div>
                        <div><span id="minutes">00</span><span>Minutos</span></div>
                        <div><span id="seconds">00</span><span>Segundos</span></div>
                    </div>
                </div>
                <div id="logbook-container" style="display:none;">
                    <h3 class="countdown-title">Diário de Bordo da Viagem!</h3>
                    <div class="logbook-entry">
                        <label for="log-domingo">Domingo, 19/10</label>
                        <textarea id="log-domingo" class="logbook-textarea" placeholder="Como foi o primeiro dia? Anotem os melhores momentos..."></textarea>
                    </div>
                    <div class="logbook-entry">
                        <label for="log-segunda">Segunda, 20/10</label>
                        <textarea id="log-segunda" class="logbook-textarea" placeholder="O que fizeram de inesquecível hoje?"></textarea>
                    </div>
                    <div class="logbook-entry">
                        <label for="log-terca">Terça, 21/10</label>
                        <textarea id="log-terca" class="logbook-textarea" placeholder="Anotações do último dia de passeios..."></textarea>
                    </div>
                </div>
            </div>
        </details>
        
        <details>
            <summary><i class="fa-solid fa-book-open"></i>Guia Completo de Ilhabela</summary>
            <div class="details-content quick-guide">
                <div class="guide-section">
                    <h4><i class="fa-solid fa-map-signs"></i> Entendendo a Ilha</h4>
                    <p><b>Lado Oeste (Canal):</b> Onde tudo acontece! A estrada principal (SP-131) corta a ilha de Sul a Norte por este lado.</p>
                    <ul>
                        <li><b>Sul:</b> Praias mais badaladas e com melhor estrutura de quiosques (Julião, Curral, Feiticeira). Acesso fácil de carro. Tende a ser mais cheio.</li>
                        <li><b>Centro:</b> Onde fica a Vila (centro histórico charmoso) e o Perequê (centro comercial com bancos, lojas e restaurantes).</li>
                        <li><b>Norte:</b> Praias mais tranquilas e selvagens (Armação, Sino, Jabaquara). O acesso para a última (Jabaquara) é por estrada de terra.</li>
                    </ul>
                    <p><b>Lado Leste (Mar Aberto):</b> O lado selvagem e aventureiro. O acesso é mais restrito.</p>
                     <ul>
                        <li><b>Castelhanos e Bonete:</b> Consideradas duas das praias mais bonitas do Brasil. O acesso é apenas por veículos 4x4 (passeios de jipe) ou barco. É um passeio de dia inteiro.</li>
                    </ul>
                </div>
                <div class="guide-section">
                    <h4><i class="fa-solid fa-star"></i> Pequenos Segredos e Dicas Extras</h4>
                    <ul>
                        <li><b>Dinheiro em Espécie:</b> Essencial! Muitos quiosques em praias mais afastadas, vendedores ambulantes e passeios de barco só aceitam dinheiro.</li>
                        <li><b>Golden Hour:</b> O pôr do sol no lado do canal (Oeste) é um espetáculo. Mirantes como o do Piúva e praias como a do Perequê são locais perfeitos para assistir.</li>
                        <li><b>Respeite a Natureza:</b> Leve seu lixo embora, não alimente os animais silvestres e evite som alto nas praias.</li>
                        <li><b>Segurança no Mar:</b> Antes de mergulhar em cachoeiras ou no mar em locais desconhecidos, pergunte a um local sobre a profundidade e a força da correnteza.</li>
                    </ul>
                </div>
                <div class="guide-section">
                    <h4><i class="fa-solid fa-phone"></i> Contatos Úteis</h4>
                    <ul>
                        <li><b>SAMU (Ambulância):</b> 192</li>
                        <li><b>Polícia Militar:</b> 190</li>
                        <li><b>Corpo de Bombeiros:</b> 193</li>
                        <li><b>Hospital Mário Covas:</b> (12) 3895-2550</li>
                        <li><b>Informações da Balsa:</b> 0800 77 33 711</li>
                    </ul>
                </div>
            </div>
        </details>

        <details>
            <summary><i class="fa-solid fa-calculator"></i>Calculadora de Orçamento</summary>
            <div class="details-content" id="budget-calculator">
                 <div class="budget-section">
                     <h4>Gastos Fixos da Viagem</h4>
                     <div class="budget-input-group">
                         <div><label for="gasto-pousada">Pousada (R$):</label><input type="number" id="gasto-pousada" class="gasto-input fixed-cost" placeholder="0.00"></div>
                         <div><label for="gasto-gasolina">Gasolina (R$):</label><input type="number" id="gasto-gasolina" class="gasto-input fixed-cost" placeholder="0.00"></div>
                         <div><label for="gasto-pedagio">Pedágios (R$):</label><input type="number" id="gasto-pedagio" class="gasto-input fixed-cost" placeholder="0.00"></div>
                         <div><label for="gasto-mercado">Mercado (R$):</label><input type="number" id="gasto-mercado" class="gasto-input fixed-cost" placeholder="0.00"></div>
                     </div>
                 </div>
                 <div class="budget-section">
                     <h4>Gastos Diários (Meta: R$ 200/dia)</h4>
                     <div class="budget-day"><h5>Domingo, 19/10</h5><div class="budget-input-group"><div><label for="gasto-domingo-refeicao">Refeições:</label><input type="number" id="gasto-domingo-refeicao" class="gasto-input daily-cost" data-day="domingo" placeholder="0.00"></div><div><label for="gasto-domingo-lazer">Lazer:</label><input type="number" id="gasto-domingo-lazer" class="gasto-input daily-cost" data-day="domingo" placeholder="0.00"></div><div><label for="gasto-domingo-outros">Outros:</label><input type="number" id="gasto-domingo-outros" class="gasto-input daily-cost" data-day="domingo" placeholder="0.00"></div></div><p class="budget-subtotal">Subtotal Domingo: R$ <span id="subtotal-domingo">0.00</span></p></div>
                     <div class="budget-day"><h5>Segunda, 20/10</h5><div class="budget-input-group"><div><label for="gasto-segunda-refeicao">Refeições:</label><input type="number" id="gasto-segunda-refeicao" class="gasto-input daily-cost" data-day="segunda" placeholder="0.00"></div><div><label for="gasto-segunda-lazer">Lazer:</label><input type="number" id="gasto-segunda-lazer" class="gasto-input daily-cost" data-day="segunda" placeholder="0.00"></div><div><label for="gasto-segunda-outros">Outros:</label><input type="number" id="gasto-segunda-outros" class="gasto-input daily-cost" data-day="segunda" placeholder="0.00"></div></div><p class="budget-subtotal">Subtotal Segunda: R$ <span id="subtotal-segunda">0.00</span></p></div>
                     <div class="budget-day"><h5>Terça, 21/10</h5><div class="budget-input-group"><div><label for="gasto-terca-refeicao">Refeições:</label><input type="number" id="gasto-terca-refeicao" class="gasto-input daily-cost" data-day="terca" placeholder="0.00"></div><div><label for="gasto-terca-lazer">Lazer:</label><input type="number" id="gasto-terca-lazer" class="gasto-input daily-cost" data-day="terca" placeholder="0.00"></div><div><label for="gasto-terca-outros">Outros:</label><input type="number" id="gasto-terca-outros" class="gasto-input daily-cost" data-day="terca" placeholder="0.00"></div></div><p class="budget-subtotal">Subtotal Terça: R$ <span id="subtotal-terca">0.00</span></p></div>
                     <div class="budget-day"><h5>Quarta, 22/10</h5><div class="budget-input-group"><div><label for="gasto-quarta-refeicao">Refeições:</label><input type="number" id="gasto-quarta-refeicao" class="gasto-input daily-cost" data-day="quarta" placeholder="0.00"></div><div><label for="gasto-quarta-lazer">Lazer:</label><input type="number" id="gasto-quarta-lazer" class="gasto-input daily-cost" data-day="quarta" placeholder="0.00"></div><div><label for="gasto-quarta-outros">Outros:</label><input type="number" id="gasto-quarta-outros" class="gasto-input daily-cost" data-day="quarta" placeholder="0.00"></div></div><p class="budget-subtotal">Subtotal Quarta: R$ <span id="subtotal-quarta">0.00</span></p></div>
                 </div>
                 <div class="budget-total">
                    <p>Total Gastos Diários: R$ <span id="total-spent">0.00</span> <span id="budget-status"></span></p>
                    <p>Total Gastos Fixos: R$ <span id="total-fixed-costs">0.00</span></p>
                    <p><strong>Custo Total da Viagem: R$ <span id="grand-total-cost">0.00</span></strong></p>
                </div>
            </div>
        </details>

        <details>
            <summary><i class="fa-solid fa-ship"></i>Status da Balsa</summary>
            <div class="details-content balsa-status">
                <p>Evite filas! Verifique a situação da travessia em tempo real antes de sair.</p>
                <a href="https://www.ilhabela.com.br/balsa/" target="_blank" class="btn-balsa"><i class="fas fa-video"></i> Ver Câmeras e Tempo de Espera</a>
            </div>
        </details>

        <details>
            <summary><i class="fa-solid fa-mosquito"></i>SOS Borrachudos</summary>
            <div class="details-content">
                <div class="dica borrachudo-dica">
                    <p><strong>Essencial:</strong> Use repelentes à base de <strong>Icaridina</strong>. Reaplique a cada 4 horas ou sempre que sair da água.</p>
                    <p><strong>Horários Críticos:</strong> O ataque é mais intenso no início da manhã (até 9h) e no final da tarde (a partir das 16h).</p>
                    <p><strong>Dica Extra:</strong> Óleo corporal após o banho cria uma barreira física que dificulta a picada. Passe o repelente por cima do óleo já seco.</p>
                </div>
            </div>
        </details>

        <details>
            <summary><i class="fa-solid fa-map-location-dot"></i>Mapa Interativo</summary>
            <div class="details-content">
                <div id="map-container">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d58548.55383180556!2d-45.41918342159659!3d-23.82117565860361!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x94d2938e3a245571%3A0x808383505c2d3a3!2sIlhabela%2C%20SP!5e0!3m2!1spt-BR!2sbr!4v1728271536717!5m2!1spt-BR!2sbr" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div>
                <h3>Abrir local no Google Maps:</h3>
                <div class="map-links">
                    <a href="https://www.google.com/maps/search/?api=1&query=Vila,Ilhabela,SP" target="_blank" class="map-link-btn">Vila (Centro Histórico)</a>
                    <a href="https://www.google.com/maps/search/?api=1&query=Praia+do+Julião,Ilhabela,SP" target="_blank" class="map-link-btn">Praia do Julião</a>
                    <a href="https://www.google.com/maps/search/?api=1&query=Praia+do+Curral,Ilhabela,SP" target="_blank" class="map-link-btn">Praia do Curral</a>
                    <a href="https://www.google.com/maps/search/?api=1&query=Mirante+do+Piúva,Ilhabela,SP" target="_blank" class="map-link-btn">Mirante do Piúva</a>
                    <a href="https://www.google.com/maps/search/?api=1&query=Praia+do+Jabaquara,Ilhabela,SP" target="_blank" class="map-link-btn">Praia do Jabaquara</a>
                    <a href="https://www.google.com/maps/search/?api=1&query=Cachoeira+dos+Três+Tombos,Ilhabela,SP" target="_blank" class="map-link-btn">Cachoeira Três Tombos</a>
                </div>
            </div>
        </details>
        
        <details>
            <summary><i class="fa-solid fa-list-check"></i>Montar Roteiro Personalizado (3 Dias)</summary>
            <div class="details-content">
                <h2>Selecione as atividades de interesse:</h2>
                <div class="activity-filters">
                    <button class="filter-btn active" data-filter="all">Todas</button>
                    <button class="filter-btn" data-filter="favorite"><i class="fas fa-star"></i> Favoritas</button>
                    <button class="filter-btn" data-filter="Praia">Praias</button>
                    <button class="filter-btn" data-filter="Cachoeira">Cachoeiras</button>
                    <button class="filter-btn" data-filter="Passeio">Passeios</button>
                </div>
                <div class="activity-selector" id="activity-selector">
                    <div class="activity-item" data-category="Praia Gratis Sul Romantico Relax" data-activity-id="praia-juliao"><label class="activity-label"><input type="checkbox" value="Praia do Julião (Sul)"> Praia do Julião (Sul)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Praia Gratis Sul Aventura" data-activity-id="praia-curral"><label class="activity-label"><input type="checkbox" value="Praia do Curral (Sul)"> Praia do Curral (Sul)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Cachoeira Gratis Sul Aventura" data-activity-id="cachoeira-tres-tombos"><label class="activity-label"><input type="checkbox" value="Cachoeira dos Três Tombos (Sul)"> Cachoeira Três Tombos (Sul)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Passeio Gratis Centro Romantico" data-activity-id="passeio-vila"><label class="activity-label"><input type="checkbox" value="Passeio na Vila (Centro)"> Passeio na Vila (Centro)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Passeio Gratis Sul Romantico" data-activity-id="por-do-sol-piuva"><label class="activity-label"><input type="checkbox" value="Pôr do Sol no Mirante do Piúva (Sul)"> Pôr do Sol no Mirante do Piúva</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Passeio Gratis Sul Romantico" data-activity-id="mirante-coracao"><label class="activity-label"><input type="checkbox" value="Mirante do Coração (Sul)"> Mirante do Coração (Sul)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Passeio Pago Sul Aventura" data-activity-id="mergulho-cabras"><label class="activity-label"><input type="checkbox" value="Mergulho na Ilha das Cabras (Sul)"> Mergulho Ilha das Cabras (Sul)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                </div>
                <button id="btn-suggest-roteiro"><i class="fas fa-magic"></i> Sugerir Roteiro</button>
                <button id="btn-generate-roteiro">Montar Meu Roteiro!</button>
                <div id="roteiro-container">
                     <h2>Seu Roteiro Personalizado</h2>
                     <div class="roteiro-gerado" id="roteiro-output"><p class="dica">Selecione suas atividades preferidas e clique em "Montar Meu Roteiro" para gerar um roteiro exclusivo de 3 dias!</p></div>
                     <button id="btn-share-roteiro" style="display: none;"><i class="fab fa-whatsapp"></i> Compartilhar Roteiro</button>
                </div>
            </div>
        </details>

        <details>
            <summary><i class="fa-solid fa-utensils"></i>Dicas Gastronômicas</summary>
            <div class="details-content">
                <div class="guide-section">
                    <h4><i class="fa-solid fa-fish"></i> Pratos para Experimentar</h4>
                    <ul>
                        <li><b>Peixe na Folha de Bananeira:</b> Um clássico caiçara, o peixe é assado lentamente com temperos, resultando em uma carne macia e saborosa.</li>
                        <li><b>Camarão na Moranga:</b> Cremoso e perfeito para compartilhar, servido dentro de uma abóbora.</li>
                        <li><b>Lula à Dorê:</b> O petisco perfeito para acompanhar uma cerveja gelada na praia.</li>
                        <li><b>Caipirinha Caiçara:</b> Peça com cachaça local e frutas da estação.</li>
                    </ul>
                </div>

                <div class="restaurant-card"><h4>Marakuthai (Vila)</h4><p><strong>Especialidade:</strong> Culinária Tailandesa. <br><b>A Vibe:</b> Ambiente super charmoso e romântico, ideal para um jantar especial a dois.</p><p><strong>Faixa de Preço:</strong> $$$ (Alto)</p></div>
                <div class="restaurant-card"><h4>Restaurante do Cura (Praia do Veloso)</h4><p><strong>Especialidade:</strong> Frutos do mar. <br><b>Dica do Chef:</b> Peça o famoso "Peixe à Cura". O ambiente é rústico e autêntico, literalmente pé na areia.</p><p><strong>Faixa de Preço:</strong> $$$ (Alto)</p></div>
                <div class="restaurant-card"><h4>Píer Pizza (Vila)</h4><p><strong>Especialidade:</strong> Pizzas de fermentação natural. <br><b>A Vibe:</b> Descontraído, com uma vista incrível para o mar. Chegue antes do pôr do sol para garantir uma mesa na varanda.</p><p><strong>Faixa de Preço:</strong> $$ (Médio)</p></div>
                <div class="restaurant-card"><h4>Sea Club (Saco da Capela)</h4><p><strong>Especialidade:</strong> Beach Club. <br><b>A Vibe:</b> Se querem um dia de praia com mais agito, música e drinks, este é o lugar. Perfeito para o fim de tarde.</p><p><strong>Faixa de Preço:</strong> $$$ (Alto)</p></div>
                <div class="restaurant-card"><h4>Ponto das Letras (Vila)</h4><p><strong>Especialidade:</strong> Café e Livraria. <br><b>A Vibe:</b> Um cantinho charmoso para um café da tarde, com bolos deliciosos e um ambiente tranquilo para relaxar.</p><p><strong>Faixa de Preço:</strong> $$ (Médio)</p></div>
                <div class="restaurant-card"><h4>Cheiro Verde (Perequê)</h4><p><strong>Especialidade:</strong> Comida caseira por quilo. <br><b>A Vibe:</b> A melhor opção para um almoço rápido, barato e gostoso, com muita variedade de saladas e pratos quentes.</p><p><strong>Faixa de Preço:</strong> $ (Baixo)</p></div>
            </div>
        </details>

        <details>
            <summary><i class="fa-solid fa-pencil"></i>Minhas Anotações</summary>
            <div class="details-content"><textarea id="user-notes" placeholder="Digite suas anotações aqui: restaurantes recomendados, lembretes, contatos..."></textarea></div>
        </details>

        <details open>
            <summary><i class="fa-solid fa-person-walking-luggage"></i>Checklist Pessoal</summary>
            <div class="details-content">
                <section data-checklist-id="pessoal">
                    </section>
            </div>
        </details>

        <details>
            <summary><i class="fa-solid fa-car"></i>Checklist do Veículo</summary>
            <div class="details-content">
                <section data-checklist-id="veiculo">
                    </section>
            </div>
        </details>

        <details>
            <summary><i class="fa-solid fa-plus"></i>Itens Personalizados</summary>
            <div class="details-content">
                <div class="add-item-form"><input type="text" id="new-item-input" placeholder="Adicionar item personalizado..."><button id="add-new-item-btn">+</button></div>
                <section data-checklist-id="outros" style="display: none;">
                    <h3>Outros<span class="checklist-counter"></span></h3>
                    <ul class="checklist"></ul>
                </section>
            </div>
        </details>
        
        <div class="footer">
            <p>Guia gerado com ❤️ para Flavio e Marcella.</p>
        </div>
    </div>
    
    <div id="imageModal" class="modal"><span class="close-modal">×</span><img class="modal-content" id="modalImage"><div id="caption"></div></div>

    <script src="app.js" defer></script>

</body>
</html>