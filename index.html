<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flavio e Marcella em Ilhabela</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>

    <div id="toast-container"></div>

    <div class="container" id="export-container">
        
        <div class="global-controls">
            <div class="control-group">
                <button class="btn-save" id="save-progress" title="Salvar"><i class="fas fa-save"></i></button>
                <button class="btn-load" id="load-progress" title="Carregar"><i class="fas fa-upload"></i></button>
                <button class="btn-clear" id="clear-progress" title="Limpar"><i class="fas fa-trash"></i></button>
                <button class="btn-pdf" id="export-pdf" title="Exportar PDF"><i class="fas fa-file-pdf"></i></button>
                <button id="install-app-btn" title="Instalar App" style="display: none; background-color: var(--primary-color); color: white;"><i class="fas fa-download"></i></button>
            </div>
            <button class="theme-toggle" id="theme-toggle" aria-label="Alternar tema"><i class="fas fa-moon"></i></button>
        </div>

        <h1>Flavio e Marcella em Ilhabela</h1>

        <details>
            <summary><i class="fa-solid fa-calculator"></i>Calculadora de Orçamento</summary>
            <div class="details-content" id="budget-calculator">
                 <div class="budget-section">
                     <h4>Gastos Fixos da Viagem</h4>
                     <div class="budget-input-group">
                         <div><label for="gasto-pousada">Pousada (R$):</label><input type="number" id="gasto-pousada" class="gasto-input fixed-cost" placeholder="0.00"></div>
                         <div><label for="gasto-gasolina">Gasolina (R$):</label><input type="number" id="gasto-gasolina" class="gasto-input fixed-cost" placeholder="0.00"></div>
                         <div><label for="gasto-pedagio">Pedágios (R$):</label><input type="number" id="gasto-pedagio" class="gasto-input fixed-cost" placeholder="0.00"></div>
                         <div><label for="gasto-mercado">Mercado (R$):</label><input type="number" id="gasto-mercado" class="gasto-input fixed-cost" placeholder="0.00"></div>
                     </div>
                 </div>
                 <div class="budget-section">
                     <h4>Gastos Diários (Meta: R$ 200/dia)</h4>
                     <div class="budget-day"><h5>Domingo, 19/10</h5><div class="budget-input-group"><div><label for="gasto-domingo-refeicao">Refeições:</label><input type="number" id="gasto-domingo-refeicao" class="gasto-input daily-cost" data-day="domingo" placeholder="0.00"></div><div><label for="gasto-domingo-lazer">Lazer:</label><input type="number" id="gasto-domingo-lazer" class="gasto-input daily-cost" data-day="domingo" placeholder="0.00"></div><div><label for="gasto-domingo-outros">Outros:</label><input type="number" id="gasto-domingo-outros" class="gasto-input daily-cost" data-day="domingo" placeholder="0.00"></div></div><p class="budget-subtotal">Subtotal Domingo: R$ <span id="subtotal-domingo">0.00</span></p></div>
                     <div class="budget-day"><h5>Segunda, 20/10</h5><div class="budget-input-group"><div><label for="gasto-segunda-refeicao">Refeições:</label><input type="number" id="gasto-segunda-refeicao" class="gasto-input daily-cost" data-day="segunda" placeholder="0.00"></div><div><label for="gasto-segunda-lazer">Lazer:</label><input type="number" id="gasto-segunda-lazer" class="gasto-input daily-cost" data-day="segunda" placeholder="0.00"></div><div><label for="gasto-segunda-outros">Outros:</label><input type="number" id="gasto-segunda-outros" class="gasto-input daily-cost" data-day="segunda" placeholder="0.00"></div></div><p class="budget-subtotal">Subtotal Segunda: R$ <span id="subtotal-segunda">0.00</span></p></div>
                     <div class="budget-day"><h5>Terça, 21/10</h5><div class="budget-input-group"><div><label for="gasto-terca-refeicao">Refeições:</label><input type="number" id="gasto-terca-refeicao" class="gasto-input daily-cost" data-day="terca" placeholder="0.00"></div><div><label for="gasto-terca-lazer">Lazer:</label><input type="number" id="gasto-terca-lazer" class="gasto-input daily-cost" data-day="terca" placeholder="0.00"></div><div><label for="gasto-terca-outros">Outros:</label><input type="number" id="gasto-terca-outros" class="gasto-input daily-cost" data-day="terca" placeholder="0.00"></div></div><p class="budget-subtotal">Subtotal Terça: R$ <span id="subtotal-terca">0.00</span></p></div>
                     <div class="budget-day"><h5>Quarta, 22/10</h5><div class="budget-input-group"><div><label for="gasto-quarta-refeicao">Refeições:</label><input type="number" id="gasto-quarta-refeicao" class="gasto-input daily-cost" data-day="quarta" placeholder="0.00"></div><div><label for="gasto-quarta-lazer">Lazer:</label><input type="number" id="gasto-quarta-lazer" class="gasto-input daily-cost" data-day="quarta" placeholder="0.00"></div><div><label for="gasto-quarta-outros">Outros:</label><input type="number" id="gasto-quarta-outros" class="gasto-input daily-cost" data-day="quarta" placeholder="0.00"></div></div><p class="budget-subtotal">Subtotal Quarta: R$ <span id="subtotal-quarta">0.00</span></p></div>
                 </div>
                 <div class="budget-total">
                    <p>Total Gastos Diários: R$ <span id="total-spent">0.00</span> <span id="budget-status"></span></p>
                    <p>Total Gastos Fixos: R$ <span id="total-fixed-costs">0.00</span></p>
                    <p><strong>Custo Total da Viagem: R$ <span id="grand-total-cost">0.00</span></strong></p>
                </div>
            </div>
        </details>

        <details>
            <summary><i class="fa-solid fa-cloud-sun-rain"></i>Previsão do Tempo</summary>
            <div class="details-content weather-widget" id="weather-widget">
                <p>Carregando previsão do tempo...</p>
            </div>
        </details>
        
        <details>
            <summary><i class="fa-solid fa-ship"></i>Status da Balsa</summary>
            <div class="details-content balsa-status">
                <p>Evite filas! Verifique a situação da travessia em tempo real antes de sair.</p>
                <a href="https://www.ilhabela.com.br/balsa/" target="_blank" class="btn-balsa"><i class="fas fa-video"></i> Ver Câmeras e Tempo de Espera</a>
            </div>
        </details>

        <details>
            <summary><i class="fa-solid fa-mosquito"></i>SOS Borrachudos</summary>
            <div class="details-content">
                <div class="dica borrachudo-dica">
                    <p><strong>Essencial:</strong> Use repelentes à base de <strong>Icaridina</strong> (Exposis, etc.). São os mais eficazes. Reaplique a cada 4 horas ou sempre que sair da água.</p>
                    <p><strong>Horários Críticos:</strong> O ataque é mais intenso no início da manhã (até 9h) e no final da tarde (a partir das 16h).</p>
                    <p><strong>Dica Extra:</strong> Óleo corporal (amêndoas, infantil) após o banho cria uma barreira física que dificulta a picada. Passe o repelente por cima do óleo já seco.</p>
                    <p><strong>Roupas:</strong> Prefira roupas claras e compridas (calças, camisas de manga) durante os horários críticos, principalmente perto de matas e cachoeiras.</p>
                    <p><strong>Se for picado:</strong> Não coce! Lave com água e sabão e use uma pomada antialérgica para aliviar.</p>
                </div>
            </div>
        </details>

        <details>
            <summary><i class="fa-solid fa-map-location-dot"></i>Mapa Interativo</summary>
            <div class="details-content">
                <div id="map-container">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d58548.55383180556!2d-45.41918342159659!3d-23.82117565860361!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x94d2938e3a245571%3A0x808383505c2d3a3!2sIlhabela%2C%20SP!5e0!3m2!1spt-BR!2sbr!4v1728271536717!5m2!1spt-BR!2sbr" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div>
                <h3>Abrir local no Google Maps:</h3>
                <div class="map-links">
                    <a href="https://www.google.com/maps/search/?api=1&query=Vila,Ilhabela,SP" target="_blank" class="map-link-btn">Vila (Centro Histórico)</a>
                    <a href="https://www.google.com/maps/search/?api=1&query=Praia+do+Julião,Ilhabela,SP" target="_blank" class="map-link-btn">Praia do Julião</a>
                    <a href="https://www.google.com/maps/search/?api=1&query=Praia+do+Curral,Ilhabela,SP" target="_blank" class="map-link-btn">Praia do Curral</a>
                    <a href="https://www.google.com/maps/search/?api=1&query=Mirante+do+Piúva,Ilhabela,SP" target="_blank" class="map-link-btn">Mirante do Piúva</a>
                    <a href="https://www.google.com/maps/search/?api=1&query=Praia+da+Feiticeira,Ilhabela,SP" target="_blank" class="map-link-btn">Praia da Feiticeira</a>
                    <a href="https://www.google.com/maps/search/?api=1&query=Praia+do+Perequê,Ilhabela,SP" target="_blank" class="map-link-btn">Praia do Perequê</a>
                    <a href="https://www.google.com/maps/search/?api=1&query=Praia+do+Jabaquara,Ilhabela,SP" target="_blank" class="map-link-btn">Praia do Jabaquara</a>
                    <a href="https://www.google.com/maps/search/?api=1&query=Cachoeira+dos+Três+Tombos,Ilhabela,SP" target="_blank" class="map-link-btn">Cachoeira Três Tombos</a>
                    <a href="http://googleusercontent.com/maps.google.com/9" target="_blank" class="map-link-btn">Mirante do Coração</a>
                    <a href="https://www.google.com/maps/search/?api=1&query=Vila,Ilhabela,SP0" target="_blank" class="map-link-btn">Praia do Bonete</a>
                    <a href="https://www.google.com/maps/search/?api=1&query=Vila,Ilhabela,SP1" target="_blank" class="map-link-btn">Cachoeira da Laje</a>
                    <a href="https://www.google.com/maps/search/?api=1&query=Vila,Ilhabela,SP2" target="_blank" class="map-link-btn">Praia do Sino</a>
                </div>
            </div>
        </details>
        
        <details>
            <summary><i class="fa-solid fa-list-check"></i>Montar Roteiro Personalizado (3 Dias)</summary>
            <div class="details-content">
                <h2>Selecione as atividades de interesse:</h2>
                <div class="activity-filters">
                    <button class="filter-btn active" data-filter="all">Todas</button>
                    <button class="filter-btn" data-filter="favorite"><i class="fas fa-star"></i> Favoritas</button>
                    <button class="filter-btn" data-filter="Praia">Praias</button>
                    <button class="filter-btn" data-filter="Cachoeira">Cachoeiras</button>
                    <button class="filter-btn" data-filter="Passeio">Passeios</button>
                    <button class="filter-btn" data-filter="Pago">Pagas</button>
                    <button class="filter-btn" data-filter="Gratis">Grátis</button>
                </div>
                <div class="activity-selector" id="activity-selector">
                    <div class="activity-item" data-category="Praia Gratis Sul Romantico Relax" data-activity-id="praia-juliao"><label class="activity-label"><input type="checkbox" value="Praia do Julião (Sul)"> Praia do Julião (Sul)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Praia Gratis Sul Aventura" data-activity-id="praia-curral"><label class="activity-label"><input type="checkbox" value="Praia do Curral (Sul)"> Praia do Curral (Sul)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Praia Gratis Sul Relax" data-activity-id="praia-feiticeira"><label class="activity-label"><input type="checkbox" value="Praia da Feiticeira (Sul)"> Praia da Feiticeira (Sul)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Praia Gratis Centro" data-activity-id="praia-pereque"><label class="activity-label"><input type="checkbox" value="Praia do Perequê (Centro)"> Praia do Perequê (Centro)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Praia Gratis Norte Aventura" data-activity-id="praia-jabaquara"><label class="activity-label"><input type="checkbox" value="Praia do Jabaquara (Norte)"> Praia do Jabaquara (Norte)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Praia Gratis Sul Aventura" data-activity-id="praia-bonete"><label class="activity-label"><input type="checkbox" value="Praia do Bonete (Sul - Barco/Trilha)"> Praia do Bonete (Sul)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Praia Gratis Norte Relax" data-activity-id="praia-sino"><label class="activity-label"><input type="checkbox" value="Praia do Sino (Norte)"> Praia do Sino (Norte)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>

                    <div class="activity-item" data-category="Cachoeira Gratis Sul Aventura" data-activity-id="cachoeira-tres-tombos"><label class="activity-label"><input type="checkbox" value="Cachoeira dos Três Tombos (Sul)"> Cachoeira Três Tombos (Sul)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Cachoeira Pago Centro" data-activity-id="cachoeira-toca"><label class="activity-label"><input type="checkbox" value="Cachoeira da Toca (Centro)"> Cachoeira da Toca (Centro)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Cachoeira Gratis Sul Aventura Romantico" data-activity-id="cachoeira-paqueta"><label class="activity-label"><input type="checkbox" value="Cachoeira do Paquetá (Sul)"> Cachoeira do Paquetá (Sul)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Cachoeira Gratis Sul Aventura" data-activity-id="cachoeira-laje"><label class="activity-label"><input type="checkbox" value="Cachoeira da Laje (Sul)"> Cachoeira da Laje (Sul)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>

                    <div class="activity-item" data-category="Passeio Gratis Centro Romantico" data-activity-id="passeio-vila"><label class="activity-label"><input type="checkbox" value="Passeio na Vila (Centro)"> Passeio na Vila (Centro)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Passeio Gratis Sul Romantico" data-activity-id="por-do-sol-piuva"><label class="activity-label"><input type="checkbox" value="Pôr do Sol no Mirante do Piúva (Sul)"> Pôr do Sol no Mirante do Piúva</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Passeio Gratis Sul" data-activity-id="mirante-barreiro"><label class="activity-label"><input type="checkbox" value="Visitar Mirante do Barreiro (Sul)"> Mirante do Barreiro (Sul)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Passeio Gratis Sul Romantico" data-activity-id="mirante-coracao"><label class="activity-label"><input type="checkbox" value="Mirante do Coração (Sul)"> Mirante do Coração (Sul)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Passeio Pago Aventura" data-activity-id="jipe-castelhanos"><label class="activity-label"><input type="checkbox" value="Jipe para Castelhanos (Leste)"> Jipe para Castelhanos (Leste)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Passeio Pago Sul Aventura" data-activity-id="mergulho-cabras"><label class="activity-label"><input type="checkbox" value="Mergulho na Ilha das Cabras (Sul)"> Mergulho Ilha das Cabras (Sul)</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Passeio Pago Centro Aventura" data-activity-id="bike-ciclovia"><label class="activity-label"><input type="checkbox" value="Alugar Bike na Ciclovia (Centro)"> Alugar Bike na Ciclovia</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>

                    <div class="activity-item" data-category="Outros Gratis Romantico Relax" data-activity-id="piquenique-praia"><label class="activity-label"><input type="checkbox" value="Piquenique na Praia (Outros)"> Piquenique na Praia</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                    <div class="activity-item" data-category="Passeio Pago Centro Romantico" data-activity-id="jantar-vila"><label class="activity-label"><input type="checkbox" value="Jantar Romântico na Vila (Pago)"> Jantar Romântico na Vila</label><span class="activity-icons"><i class="fas fa-upload image-upload-trigger" title="Enviar sua foto"></i><i class="fas fa-star favorite-trigger"></i></span></div>
                </div>
                <button id="btn-suggest-roteiro"><i class="fas fa-magic"></i> Sugerir Roteiro para Hoje!</button>
                <button id="btn-generate-roteiro">Montar Meu Roteiro!</button>
                <div id="roteiro-container">
                     <h2>Seu Roteiro Personalizado</h2>
                     <div class="roteiro-gerado" id="roteiro-output"><p class="dica">Selecione suas atividades preferidas e clique em "Montar Meu Roteiro" para gerar um roteiro exclusivo de 3 dias!</p></div>
                     <button id="btn-share-roteiro" style="display: none;"><i class="fab fa-whatsapp"></i> Compartilhar Roteiro</button>
                </div>
            </div>
        </details>

        <details>
            <summary><i class="fa-solid fa-utensils"></i>Dicas Gastronômicas</summary>
            <div class="details-content">
                <div class="restaurant-card"><h4>Marakuthai (Vila)</h4><p><strong>Especialidade:</strong> Culinária Tailandesa em um ambiente charmoso e romântico.</p><p><strong>Faixa de Preço:</strong> $$$ (Alto)</p></div>
                <div class="restaurant-card"><h4>Píer Pizza (Vila)</h4><p><strong>Especialidade:</strong> Pizzas de fermentação natural com vista para o mar.</p><p><strong>Faixa de Preço:</strong> $$ (Médio)</p></div>
                <div class="restaurant-card"><h4>Restaurante do Cura (Praia do Veloso)</h4><p><strong>Especialidade:</strong> Frutos do mar frescos em um ambiente "pé na areia" autêntico.</p><p><strong>Faixa de Preço:</strong> $$$ (Alto)</p></div>
                <div class="restaurant-card"><h4>Cheiro Verde (Perequê)</h4><p><strong>Especialidade:</strong> Comida caseira por quilo com muita variedade e bom preço.</p><p><strong>Faixa de Preço:</strong> $ (Baixo)</p></div>
                <div class="restaurant-card"><h4>Viana Praia (Praia do Viana)</h4><p><strong>Especialidade:</strong> Cozinha contemporânea e drinks em um ambiente sofisticado.</p><p><strong>Faixa de Preço:</strong> $$$ (Alto)</p></div>
                <div class="restaurant-card"><h4>Borrachudo Sanduíches (Perequê)</h4><p><strong>Especialidade:</strong> Hambúrgueres artesanais e lanches rápidos.</p><p><strong>Faixa de Preço:</strong> $ (Baixo)</p></div>
                <div class="restaurant-card"><h4>Pimenta de Cheiro (Perequê)</h4><p><strong>Especialidade:</strong> Culinária caiçara e pratos com peixes e frutos do mar.</p><p><strong>Faixa de Preço:</strong> $$ (Médio)</p></div>
                <div class="restaurant-card"><h4>Creperia N'Areia (Vila)</h4><p><strong>Especialidade:</strong> Crepes doces e salgados em um ambiente descontraído.</p><p><strong>Faixa de Preço:</strong> $$ (Médio)</p></div>
                <div class="restaurant-card"><h4>Manjericão (Vila)</h4><p><strong>Especialidade:</strong> Comida caseira e saudável, com opções vegetarianas.</p><p><strong>Faixa de Preço:</strong> $$ (Médio)</p></div>
            </div>
        </details>

        <details>
            <summary><i class="fa-solid fa-pencil"></i>Minhas Anotações</summary>
            <div class="details-content"><textarea id="user-notes" placeholder="Digite suas anotações aqui: restaurantes recomendados, lembretes, contatos..."></textarea></div>
        </details>

        <details open>
            <summary><i class="fa-solid fa-person-walking-luggage"></i>Checklist Pessoal</summary>
            <div class="details-content">
                <section data-checklist-id="pessoal">
                    </section>
            </div>
        </details>

        <details>
            <summary><i class="fa-solid fa-car"></i>Checklist do Veículo</summary>
            <div class="details-content">
                <section data-checklist-id="veiculo">
                    </section>
            </div>
        </details>

        <details>
            <summary><i class="fa-solid fa-plus"></i>Itens Personalizados</summary>
            <div class="details-content">
                <div class="add-item-form"><input type="text" id="new-item-input" placeholder="Adicionar item personalizado..."><button id="add-new-item-btn">+</button></div>
                <section data-checklist-id="outros" style="display: none;">
                    <h3>Outros<span class="checklist-counter"></span></h3>
                    <ul class="checklist"></ul>
                </section>
            </div>
        </details>
        
        <div class="footer">
            <p>Guia gerado com base nas informações fornecidas. Tenha uma ótima viagem!</p>
        </div>
    </div>
    
    <div id="imageModal" class="modal"><span class="close-modal">×</span><img class="modal-content" id="modalImage"><div id="caption"></div></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="app.js" defer></script>

</body>
</html>